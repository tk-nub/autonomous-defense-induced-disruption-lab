
---

# Repository Architecture

```mermaid
flowchart TD

    %% ========================
    %% Infrastructure Setup
    %% ========================
    A[AddUsers.ps1<br>Create AD Test Users]
    B[UserSim_MasterBootstrap.ps1<br>Initialize Simulation Framework]
    C[Install-AtomicRedTeam-Multi.ps1<br>Install Atomic Red Team]

    %% ========================
    %% Identity Configuration
    %% ========================
    D[Lab-ROPC-Activator<br>Entra ID Enterprise App]

    %% ========================
    %% Windows User Simulation
    %% ========================
    E[Master_Playwright_Taskcreator2.ps1<br>Create Scheduled Tasks]
    F[Start-AllPlaywrightTasks-And-Summarize.ps1<br>Execute Simulation]

    %% ========================
    %% External Simulation
    %% ========================
    G[Kali Linux Environment]
    H[OfficeLoginScript.ps1<br>Automated Login]
    I[m365-outlook-flow.spec.ts<br>Mailbox Interaction]
    J[Tor + Proxychains Routing]

    %% ========================
    %% Adversarial Activity
    %% ========================
    K[Run-AtomicCampaign.ps1<br>Execute Techniques]

    %% ========================
    %% Defender Response
    %% ========================
    L[Defender Telemetry + Detection]
    M[Attack Disruption Containment]
    N[User Accounts Disabled]

    %% ========================
    %% Optional Deployment
    %% ========================
    O[Deploy-AtomicCampaign-MASTER.ps1<br>Optional Campaign Deployment]

    %% ========================
    %% Flow Relationships
    %% ========================

    A --> B --> C --> D --> E --> F
    F --> K
    G --> J --> H --> I --> L
    K --> L --> M --> N

    O -. optional .-> K
```
# Autonomous Defense Induced Disruption Lab

Hybrid enterprise lab environment for researching **Autonomous Defense Induced Disruption (ADID)**.  
This repository provides infrastructure build scripts and step-by-step instructions for recreating a hybrid enterprise environment used to study AI-driven autonomous containment behavior.

---

## Purpose of the Lab Environment

This lab was designed to:

- Simulate a modern hybrid enterprise architecture  
- Integrate on-premises Active Directory with cloud identity services  
- Generate cross-domain telemetry across identity and endpoint layers  
- Enable autonomous containment actions across identity and endpoint control planes  
- Reproduce enterprise conditions required to test Attack Disruption scenarios  

---

## What the Lab Framework Provides

- Preconfigured virtual machine templates  
- Step-by-step hybrid deployment guidance  
- Active Directory domain controllers and Windows Server roles  
- Domain-joined Windows 11 enterprise endpoints  
- Test identities and user objects  
- Azure AD (Entra ID) and Microsoft 365 integration  

---

## High-Level Architecture

### On-Premises Infrastructure
- Active Directory Domain Controller  
- Windows Server infrastructure services  
- Domain-joined Windows 11 endpoints  

### Cloud Services
- Azure AD (Microsoft Entra ID)  
- Microsoft 365 E5 tenant  
- Microsoft Defender XDR  

---

## Scope of This Repository

This repository contains:

- Lab build instructions  
- Infrastructure configuration scripts  
- Environment reconstruction guidance  

Detection, investigation, and automated containment actions occur within Microsoft Defender XDR and are triggered through simulated activity generated by this lab environment.

---

## Research Focus

This lab supports experimentation and analysis of:

- AI-driven autonomous response systems  
- Cross-domain containment behavior  
- Operational risks of automated security enforcement  
- Autonomous Defense Induced Disruption (ADID) scenarios  

---

## Intended Use

This environment is provided for:

- Security research  
- Controlled experimentation  
- Educational use  
- Reproducible lab simulation  

It is not intended for production deployment.

---

# Repository File Map

This repository is organized by functional role to support reproducibility and clarity.

---

## Folder Structure

```
/autonomous-defense-induced-disruption-lab
│
├── README.md
├── LICENSE
│
├── scripts/
│   ├── AddUsers.ps1
│   ├── UserSim_MasterBootstrap.ps1
│   ├── Install-AtomicRedTeam-Multi.ps1
│   ├── Master_Playwright_Taskcreator2.ps1
│   ├── Run-Playwright.ps1
│   ├── Start-AllPlaywrightTasks-And-Summarize.ps1
│   ├── Run-AtomicCampaign.ps1
│   ├── Deploy-AtomicCampaign-MASTER.ps1 (optional)
│   └── Entra-ID-App-Setup-Lab-ROPC-Activator.ps1
│
├── playwright/
│   └── m365-outlook-flow.spec.ts
│
├── attacker/
│   ├── OfficeLoginScript.ps1
│   └── Routing-Playwright-Through-Tor.md
│
├── artifacts/
│   └── opw2uvbyv8on4idnrirebi5h7.docx
│
└── docs/
    └── supporting documentation
```

---

## Folder Purpose

### scripts/
Windows-based lab automation and execution logic.

These scripts run inside the hybrid enterprise environment and generate telemetry used for research observation.

---

### playwright/
Browser automation workflows executed by simulation systems.

Defines user interaction behavior inside Microsoft 365 services.

---

### attacker/
External simulation components executed from Kali Linux or other non-domain systems.

Used to generate proxy-routed authentication and mailbox activity.

---

### artifacts/
Research artifacts and payloads used during simulation activity.

Not required for infrastructure setup but used during experiments.

---

### docs/
Human-readable documentation, setup notes, and reference material.

---

## Execution Flow by Folder

### Infrastructure and Environment Preparation
```
scripts/AddUsers.ps1
scripts/UserSim_MasterBootstrap.ps1
scripts/Install-AtomicRedTeam-Multi.ps1
scripts/Entra-ID-App-Setup-Lab-ROPC-Activator.ps1
```

---

### Windows User Simulation
```
scripts/Master_Playwright_Taskcreator2.ps1
scripts/Run-Playwright.ps1
scripts/Start-AllPlaywrightTasks-And-Summarize.ps1
```

---

### External Activity Simulation (Kali Linux)
```
attacker/OfficeLoginScript.ps1
playwright/m365-outlook-flow.spec.ts
attacker/Routing-Playwright-Through-Tor.md
```

---

### Adversarial Technique Execution
```
scripts/Run-AtomicCampaign.ps1
```

Optional automated deployment:
```
scripts/Deploy-AtomicCampaign-MASTER.ps1
```

---

## Execution Order Summary

1. scripts/AddUsers.ps1  
2. scripts/UserSim_MasterBootstrap.ps1  
3. scripts/Install-AtomicRedTeam-Multi.ps1  
4. Configure Entra ID App  
5. scripts/Master_Playwright_Taskcreator2.ps1  
6. scripts/Start-AllPlaywrightTasks-And-Summarize.ps1  
7. attacker/OfficeLoginScript.ps1 (via proxychains)  
8. scripts/Run-AtomicCampaign.ps1  

Optional:
- scripts/Deploy-AtomicCampaign-MASTER.ps1

---

## Files That May Be Optional

You may not need the following depending on deployment method:

- Deploy-AtomicCampaign-MASTER.ps1 (only for automated campaign staging)

All other files are part of the core execution chain.

---

---

# Research Methodology

```mermaid
flowchart TD

    %% =====================================
    %% ENVIRONMENT CONSTRUCTION
    %% =====================================
    A[Build Microsoft Enterprise Lab<br>Hyper-V + AD + Windows Clients]
    B[Replace Default Domain<br>Rejoin All Systems]
    C[Create Test Users<br>AddUsers.ps1]
    D[Hybrid Identity Configuration<br>Azure AD Connect + M365 E5]
    E[Onboard Endpoints to Defender XDR]

    %% =====================================
    %% BASELINE TELEMETRY GENERATION
    %% =====================================
    F[Initialize User Simulation Framework<br>UserSim_MasterBootstrap.ps1]
    G[Internal User Activity Simulation<br>Playwright Scheduled Tasks]

    %% =====================================
    %% EXTERNAL IDENTITY SIGNAL GENERATION
    %% =====================================
    H[Kali Linux Attacker Environment]
    I[Proxy-Routed Authentication Activity<br>Tor + Proxychains]
    J[Automated Mailbox Interaction<br>Playwright]

    %% =====================================
    %% ADVERSARIAL BEHAVIOR SIMULATION
    %% =====================================
    K[Deploy Atomic Red Team]
    L[Execute Technique Campaigns<br>Run-AtomicCampaign.ps1]

    %% =====================================
    %% DEFENSIVE RESPONSE
    %% =====================================
    M[Defender Telemetry Correlation]
    N[Risk Escalation Across Identity + Endpoint]
    O[Attack Disruption Decision Engine]
    P[Automated Containment Action]

    %% =====================================
    %% EXPERIMENTAL OBSERVATION
    %% =====================================
    Q[User Accounts Disabled]
    R[Operational Impact Observed]

    %% =====================================
    %% ANALYSIS
    %% =====================================
    S[Document Detection Chain]
    T[Analyze Trigger Conditions]
    U[Identify Autonomous Defense Induced Disruption]

    %% =====================================
    %% FLOW
    %% =====================================

    A --> B --> C --> D --> E
    E --> F --> G
    G --> M

    H --> I --> J --> M
    K --> L --> M

    M --> N --> O --> P --> Q --> R
    R --> S --> T --> U
```
